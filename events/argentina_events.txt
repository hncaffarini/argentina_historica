namespace = argentina_events

# Evento de ejemplo: Fomento de la Inmigración
argentina_events.1 = {
	type = country_event
	title = argentina_events.1.t
	desc = argentina_events.1.d
	flavor = argentina_events.1.f
	
	gui_window = event_window

	trigger = {
		exists = c:ARG
		this = c:ARG
		game_date = 1845.1.1
		NOT = { has_variable = argentina_inmigracion_lanzada }
	}

	immediate = {
		set_variable = argentina_inmigracion_lanzada
	}

	# Opción A: Fomentar activamente
	option = {
		name = argentina_events.1.a
		default_option = yes

		add_prestige = 20

		add_modifier = {
			name = argentina_fomento_inmigracion
			days = 3650 # Dura 10 años
		}
		add_enactment_progression = {
			law = law_cultural_exclusion
			value = 0.1
		}
	}

	# Opción B: Mantener el statu quo
	option = {
		name = argentina_events.1.b
		add_influence = 100
	}
}

# 1836 - El Control del Puerto y la ley de aduanas
arg_ley_de_aduanas = {
	type = country_event
	title = arg_ley_de_aduanas.t
	desc = arg_ley_de_aduanas.d
	flavor = arg_ley_de_aduanas.f
	
	gui_window = event_window
	video = "gfx/event_pictures/southamerica_aristocrats.bk2"

	trigger = {
		tag = ARG
		game_date = 1836.1.1
		NOT = { has_variable = arg_evento_aduana_lanzado }
	}

	immediate = {
		set_variable = arg_evento_aduana_lanzado
	}

	# Opción Histórica: Mantener el control porteño
	option = {
		name = arg_ley_de_aduanas.a
		default_option = yes
		custom_tooltip = arg_ley_de_aduanas.a.tt
		
		# Beneficio económico para Buenos Aires, pero enojo en el litoral
		add_modifier = {
			name = arg_monopolio_puerto
			months = 120
		}
	}

	# Opción Alternativa: Ceder ante el litoral
	option = {
		name = arg_ley_de_aduanas.b
		custom_tooltip = arg_ley_de_aduanas.b.tt
		
		# Perdés autoridad pero calmas a las provincias
		add_authority = -100
		add_prestige = 10
	}
}

# 1837 - Guerra contra la Confederación Perú-Boliviana
arg_guerra_peru_boliviana = {
	type = country_event
	title = arg_guerra_peru_boliviana.t
	desc = arg_guerra_peru_boliviana.d
	flavor = arg_guerra_peru_boliviana.f
	
	gui_window = event_window
	video = "gfx/event_pictures/unspecific_military_parade.bk2"

	trigger = {
		tag = ARG
		game_date = 1837.5.1
		# Condición: Que Bolivia sea una amenaza o esté unida a Perú
		any_country = {
			tag = BOL
			OR = {
				relations = { target = ARG value < 0 }
				has_variable = peru_bolivia_confederation_formed
			}
		}
		NOT = { has_variable = arg_guerra_norte_lanzada }
	}

	immediate = {
		set_variable = arg_guerra_norte_lanzada
	}

	# Opción A: Declarar la guerra (Histórica)
	option = {
		name = arg_guerra_peru_boliviana.a
		default_option = yes
		
		# Crea un 'Casus Belli' contra Bolivia
		create_diplomatic_play = {
			target = c:BOL
			play_type = dp_humiliate # O 'dp_conquer_state' para Tarija
		}
		
		# Bono militar temporal para representar el mando de Heredia
		add_modifier = {
			name = arg_ejercito_del_norte
			months = 24
		}
	}

	# Opción B: Ignorar el conflicto
	option = {
		name = arg_guerra_peru_boliviana.b
		add_prestige = -20
		add_radicalism_mult = {
			value = 0.1
			state = s:STATE_TUCUMAN
		}
	}
}

# 1838 - El Bloqueo Francés
arg_bloqueo_frances = {
	type = country_event
	title = arg_bloqueo_frances.t
	desc = arg_bloqueo_frances.d
	flavor = arg_bloqueo_frances.f
	
	gui_window = event_window
	video = "gfx/event_pictures/unspecific_naval_battle.bk2"

	trigger = {
		tag = ARG
		game_date >= 1838.3.28
		NOT = { has_variable = arg_bloqueo_frances_lanzado }
		# Solo ocurre si Francia existe y es una potencia
		exists = c:FRA
	}

	immediate = {
		set_variable = arg_bloqueo_frances_lanzado
	}

	# Opción A: Rechazar las demandas (Histórico)
	option = {
		name = arg_bloqueo_frances.a
		default_option = yes
		
		# Efecto: El bloqueo asfixia la economía
		add_modifier = {
			name = arg_bloqueo_economico_frances
			months = 24
		}
		add_prestige = 20 # Por defender la soberanía
		
		# Francia se enoja
		c:FRA = {
			add_relations = { target = c:ARG value = -50 }
		}
	}

	# Opción B: Ceder ante Francia
	option = {
		name = arg_bloqueo_frances.b
		add_prestige = -30
		add_authority = -100
		# Se vuelve un títere económico de Francia
		add_modifier = {
			name = arg_concesiones_francia
			months = 60
		}
	}
}

# 1839 - Revolución de los Libres del Sur
arg_libres_del_sur = {
	type = country_event
	title = arg_libres_del_sur.t
	desc = arg_libres_del_sur.d
	flavor = arg_libres_del_sur.f
	
	gui_window = event_window
	video = "gfx/event_pictures/estate_owners.bk2"

	trigger = {
		tag = ARG
		is_date >= 1839.10.29
		# Solo ocurre si estamos bajo el bloqueo francés
		has_modifier = arg_bloqueo_economico_frances
		NOT = { has_variable = arg_libres_sur_lanzado }
	}

	immediate = {
		set_variable = arg_libres_sur_lanzado
	}

	# Opción A: Represión implacable (Histórica)
	option = {
		name = arg_libres_del_sur.a
		default_option = yes
		
		# Aumenta el radicalismo de los Terratenientes
		ig:ig_landowners = {
			add_approval = -5
		}
		# Buenos Aires sufre disturbios
		s:STATE_BUENOS_AIRES = {
			add_radicalism_mult = {
				value = 0.15
			}
		}
		add_prestige = 10
	}

	# Opción B: Intentar negociar
	option = {
		name = arg_libres_del_sur.b
		# Perdés autoridad con tu propia base de poder
		add_authority = -150
		ig:ig_landowners = {
			add_approval = 2
		}
	}
}

# 1840 - La Coalición del Norte
arg_coalicion_norte = {
	type = country_event
	title = arg_coalicion_norte.t
	desc = arg_coalicion_norte.d
	flavor = arg_coalicion_norte.f
	
	gui_window = event_window
	video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"

	trigger = {
		tag = ARG
		is_date >= 1840.4.7
		NOT = { has_variable = arg_coalicion_norte_lanzada }
		# Solo ocurre si Rosas sigue en el poder
		ig:ig_landowners = { is_in_government = yes }
	}

	immediate = {
		set_variable = arg_coalicion_norte_lanzada
	}

	# Opción A: Campaña militar de Oribe (Histórica)
	option = {
		name = arg_coalicion_norte.a
		default_option = yes
		
		# Representamos la guerra civil como un costo de mantenimiento y lucha interna
		add_modifier = {
			name = arg_guerra_civil_norte
			months = 36
		}
		
		# Radicalizamos a los intelectuales (que apoyaban la coalición)
		ig:ig_intelligentsia = {
			add_approval = -5
		}
	}

	# Opción B: Intentar sobornar a los caudillos locales
	option = {
		name = arg_coalicion_norte.b
		# Un costo alto de dinero para evitar la lucha armada
		add_treasury = -20000 
		add_authority = -100
	}
}

# 1841 - Fiestas Mayas
arg_fiestas_mayas_1841 = {
	type = country_event
	title = arg_fiestas_mayas_1841.t
	desc = arg_fiestas_mayas_1841.d
	flavor = arg_fiestas_mayas_1841.f
	
	gui_window = event_window
	video = "gfx/event_pictures/unspecific_military_parade.bk2"

	trigger = {
		tag = ARG
		is_date >= 1841.5.25
		NOT = { has_variable = arg_fiestas_41_lanzado }
	}

	immediate = { set_variable = arg_fiestas_41_lanzado }

	# Opción A: Celebración masiva y patriótica
	option = {
		name = arg_fiestas_mayas_1841.a
		add_authority = 50
		add_loyalists = {
			value = 0.05
			pop_type = laborers
		}
		# Los intelectuales (opositores) ven esto como pura propaganda
		ig:ig_intelligentsia = { add_approval = -2 }
	}
}

# 1842 - Batalla de Arroyo Grande
arg_batalla_arroyo_grande = {
	type = country_event
	title = arg_batalla_arroyo_grande.t
	desc = arg_batalla_arroyo_grande.d
	flavor = arg_batalla_arroyo_grande.f
	
	gui_window = event_window
	video = "gfx/event_pictures/europenorthamerica_before_the_battle.bk2"

	trigger = {
		tag = ARG
		is_date >= 1842.12.6
		NOT = { has_variable = arg_arroyo_grande_lanzado }
	}

	immediate = { set_variable = arg_arroyo_grande_lanzado }

	option = {
		name = arg_batalla_arroyo_grande.a
		add_prestige = 15
		# Mejora la moral del ejército
		add_modifier = { name = arg_victoria_federal months = 24 }
		# Tensión diplomática con el Reino Unido y Francia por el asedio a Montevideo
		c:GBR = { add_relations = { target = c:ARG value = -10 } }
	}
}

# 1843 - El espíritu de La Moda
arg_revista_la_moda = {
	type = country_event
	title = arg_revista_la_moda.t
	desc = arg_revista_la_moda.d
	flavor = arg_revista_la_moda.f
	
	gui_window = event_window
	texture = "gfx/event_pictures/europenorthamerica_london_center.bk2"

	trigger = {
		tag = ARG
		is_date >= 1843.5.1
		NOT = { has_variable = arg_la_moda_lanzado }
	}

	immediate = { set_variable = arg_la_moda_lanzado }

	# Opción A: Tolerar estas reuniones sociales
	option = {
		name = arg_revista_la_moda.a
		add_enactment_progression = { law = law_freedom_of_thought value = 0.05 }
		ig:ig_intelligentsia = { add_approval = 2 }
	}

	# Opción B: Censurar por considerarlas unitarias
	option = {
		name = arg_revista_la_moda.b
		add_authority = 50
		ig:ig_intelligentsia = { add_approval = -5 }
	}
}

# 1844 - Terremoto de Salta
arg_terremoto_salta = {
	type = country_event
	title = arg_terremoto_salta.t
	desc = arg_terremoto_salta.d
	flavor = arg_terremoto_salta.f
	
	gui_window = event_window
	texture = "gfx/event_pictures/southamerica_war_civilians.bk2"

	trigger = {
		tag = ARG
		is_date >= 1844.10.18
		NOT = { has_variable = arg_terremoto_44_lanzado }
	}

	immediate = { set_variable = arg_terremoto_44_lanzado }

	# Opción A: Enviar fondos para la reconstrucción
	option = {
		name = arg_terremoto_salta.a
		add_treasury = -15000
		s:STATE_SALTA = {
			add_modifier = { name = arg_reconstruccion_salta months = 24 }
		}
	}

	# Opción B: Que la fe y la caridad se encarguen
	option = {
		name = arg_terremoto_salta.b
		s:STATE_SALTA = {
			add_radicalism_mult = { value = 0.1 }
		}
		# Ganas aprobación de los religiosos
		ig:ig_devout = { add_approval = 2 }
	}
}

# 1845 - Vuelta de Obligado
arg_vuelta_obligado = {
	type = country_event
	title = arg_vuelta_obligado.t
	desc = arg_vuelta_obligado.d
	flavor = arg_vuelta_obligado.f
	
	gui_window = event_window
	video = "gfx/event_pictures/unspecific_naval_battle.bk2"

	trigger = {
		tag = ARG
		is_date >= 1845.11.20
		NOT = { has_variable = arg_obligado_lanzado }
		# Verifica que estemos bajo presión diplomática europea
		OR = {
			has_modifier = arg_bloqueo_economico_frances
			relations = { target = c:GBR value < 0 }
		}
	}

	immediate = { set_variable = arg_obligado_lanzado }

	# Opción A: Resistencia armada
	option = {
		name = arg_vuelta_obligado.a
		default_option = yes
		
		# Efecto histórico: Gran aumento de prestigio nacional
		add_prestige = 50
		add_authority = 100
		
		# Las potencias sufren un golpe a sus relaciones pero ganamos respeto
		c:GBR = { add_relations = { target = c:ARG value = -20 } }
		c:FRA = { add_relations = { target = c:ARG value = -20 } }
		
		# El costo de la defensa
		add_treasury = -10000
		add_modifier = { name = arg_espiritu_obligado months = 48 }
	}

	# Opción B: Permitir el paso por presión diplomática
	option = {
		name = arg_vuelta_obligado.b
		add_prestige = -50
		add_authority = -200
		# Se abren los ríos a la fuerza (libre navegación prematura)
		add_modifier = { name = arg_libre_navegacion_forzada months = 120 }
	}
}

# 1846 - Civilización o Barbarie
arg_facundo_sarmiento = {
	type = country_event
	title = arg_facundo_sarmiento.t
	desc = arg_facundo_sarmiento.d
	flavor = arg_facundo_sarmiento.f
	
	gui_window = event_window
	texture = "gfx/event_pictures/southamerica_aristocrats.bk2"

	trigger = {
		tag = ARG
		is_date >= 1846.1.1
		NOT = { has_variable = arg_facundo_lanzado }
		# Históricamente, Sarmiento estaba exiliado
		ig:ig_intelligentsia = { is_in_government = no }
	}

	immediate = { set_variable = arg_facundo_lanzado }

	# Opción A: Impacto cultural
	option = {
		name = arg_facundo_sarmiento.a
		# Aumenta el deseo de reformas en los intelectuales
		ig:ig_intelligentsia = { add_approval = 2 }
		add_enactment_progression = { law = law_public_schools value = 0.05 }
		# Rosas se irrita por la publicación
		add_authority = -25
	}
}

# 1847 - Mejoras en el Puerto de Buenos Aires
arg_muelle_pasajeros = {
	type = country_event
	title = arg_muelle_pasajeros.t
	desc = arg_muelle_pasajeros.d
	flavor = arg_muelle_pasajeros.f
	
	gui_window = event_window
	video = "gfx/event_pictures/europenorthamerica_london_center.bk2"

	trigger = {
		tag = ARG
		is_date >= 1847.1.1
		NOT = { has_variable = arg_muelle_lanzado }
	}

	immediate = { set_variable = arg_muelle_lanzado }

	# Opción A: Invertir en infraestructura portuaria
	option = {
		name = arg_muelle_pasajeros.a
		add_treasury = -5000
		s:STATE_BUENOS_AIRES = {
			add_modifier = { name = arg_mejora_desembarco months = 60 }
		}
	}

	# Opción B: Seguir usando las carretas tradicionales
	option = {
		name = arg_muelle_pasajeros.b
		add_authority = 25 # Mantiene el orden tradicional
	}
}

# 1848 - El Destino de Camila O'Gorman
arg_camila_ogorman = {
	type = country_event
	title = arg_camila_ogorman.t
	desc = arg_camila_ogorman.d
	flavor = arg_camila_ogorman.f
	
	gui_window = event_window
	video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"

	trigger = {
		tag = ARG
		is_date >= 1848.8.18
		NOT = { has_variable = arg_camila_lanzado }
	}

	immediate = { set_variable = arg_camila_lanzado }

	# Opción A: Aplicar la ley con rigor (Histórica)
	option = {
		name = arg_camila_ogorman.a
		default_option = yes
		
		# Rosas mantiene el apoyo de los sectores más conservadores pero genera lejanía moral
		ig:ig_devout = { add_approval = 2 }
		add_authority = 50
		
		# Impacto negativo en la opinión pública y prestigio
		add_prestige = -10
		add_radicalism_mult = {
			value = 0.05
		}
	}

	# Opción B: Conmutar la pena por el exilio
	option = {
		name = arg_camila_ogorman.b
		# Enojo de la Iglesia y sectores puritanos
		ig:ig_devout = { add_approval = -5 }
		add_authority = -50
		# Alivia tensiones sociales
		add_loyalists = {
			value = 0.02
		}
	}
}

# 1849 - El Tratado Arana-Southern
arg_tratado_arana_southern = {
	type = country_event
	title = arg_tratado_arana_southern.t
	desc = arg_tratado_arana_southern.d
	flavor = arg_tratado_arana_southern.f
	
	gui_window = event_window
	video = "gfx/event_pictures/europenorthamerica_capitalists_meeting.bk2"

	trigger = {
		tag = ARG
		is_date >= 1849.11.24
		NOT = { has_variable = arg_arana_southern_lanzado }
		# Solo ocurre si el Reino Unido existe
		exists = c:GBR
	}

	immediate = { 
		set_variable = arg_arana_southern_lanzado
		# Quitamos los efectos negativos de los bloqueos si es que quedaba alguno
		remove_modifier = arg_bloqueo_economico_frances
	}

	# Opción A: Un triunfo para la Soberanía
	option = {
		name = arg_tratado_arana_southern.a
		default_option = yes
		
		add_prestige = 50
		add_authority = 100
		
		# Mejora drásticamente las relaciones con GBR
		c:GBR = {
			add_relations = { target = c:ARG value = 50 }
		}
		
		# Bono económico por el fin de las hostilidades
		add_modifier = {
			name = arg_paz_britanica
			months = 60
		}
	}
}

# 1850 - El paso a la inmortalidad de San Martín
arg_muerte_san_martin = {
	type = country_event
	title = arg_muerte_san_martin.t
	desc = arg_muerte_san_martin.d
	flavor = arg_muerte_san_martin.f
	
	gui_window = event_window
	texture = "gfx/event_pictures/southamerica_aristocrats.bk2"

	trigger = {
		tag = ARG
		is_date >= 1850.8.17
		NOT = { has_variable = arg_san_martin_muerte_lanzada }
	}

	immediate = { set_variable = arg_san_martin_muerte_lanzada }

	# Opción A: "El Padre de la Patria ha partido"
	option = {
		name = arg_muerte_san_martin.a
		default_option = yes
		
		# La figura de San Martín une a los argentinos
		add_loyalists = {
			value = 0.05
		}
		
		# Rosas recibe el sable (Legitimidad política)
		add_prestige = 25
		add_authority = 50
		
		# El país entra en luto
		add_modifier = {
			name = arg_luto_nacional
			months = 12
		}
	}
}

# 1851 - El Pronunciamiento de Urquiza
arg_evento_pronunciamiento = {
	type = country_event
	title = arg_evento_pronunciamiento.t
	desc = arg_evento_pronunciamiento.d
	flavor = arg_evento_pronunciamiento.f
	
	gui_window = event_window
	video = "gfx/event_pictures/europenorthamerica_springtime_of_nations.bk2"

	trigger = {
		tag = ARG
		is_date >= 1851.5.1
		NOT = { has_variable = arg_mision_caseros_activa }
	}

	immediate = {
		set_variable = arg_mision_caseros_activa
	}

	option = {
		name = arg_evento_pronunciamiento.a
		# Al elegir esto, se activa la entrada de diario
	}
}

# 1852 - La Caída de Rosas
arg_batalla_caseros.1 = {
	type = country_event
	title = "La Batalla de Caseros"
	desc = "El #v $arg_loc_ejercito_grande$#! ha derrotado a las fuerzas federales en los campos de Caseros. Juan Manuel de Rosas ha firmado su renuncia y se encamina al exilio en un buque británico. Una nueva era comienza para la nación: la era de la Constitución."
	
	gui_window = event_window
	video = "gfx/event_pictures/military_retreat.bk2"

	option = {
		name = "Termina una época. Comienza la Organización Nacional."
		# Cambios masivos: Rosas muere/se va, cambian las leyes
		set_law = law_census_suffrage
		set_law = law_guaranteed_liberties
		
		# Limpiamos variables para la siguiente etapa del mod
		remove_variable = arg_mision_caseros_activa
	}
}